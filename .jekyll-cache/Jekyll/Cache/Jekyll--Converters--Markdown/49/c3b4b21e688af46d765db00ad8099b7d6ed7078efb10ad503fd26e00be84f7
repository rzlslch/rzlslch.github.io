I"²$<p>Assalamuâ€™alaikum Warahmatullah Wabarakatuh</p>

<p>Bismillahirrahmanirrahim</p>

<p>Pada kesempatan kali ini saya memutuskan untuk bereksperimen dengan micro controller. Lebih tepat nya Arduino Pro Micro (Leonardo). Saya menambahkan modul nrf24l01+ sebagai transreceiver.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Barang</th>
      <th style="text-align: right">Harga (Rp)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">2 pro micro @ 60rb</td>
      <td style="text-align: right">120.000</td>
    </tr>
    <tr>
      <td style="text-align: left">2 module nrf24l01+ @13rb</td>
      <td style="text-align: right">26.000</td>
    </tr>
    <tr>
      <td style="text-align: left">breadboard</td>
      <td style="text-align: right">15.000</td>
    </tr>
    <tr>
      <td style="text-align: left">kabel jumper pelangi</td>
      <td style="text-align: right">20.000</td>
    </tr>
    <tr>
      <td style="text-align: left">2 kabel data usb-micro @15rb</td>
      <td style="text-align: right">30.000</td>
    </tr>
    <tr>
      <td style="text-align: left">dioda 1n4148 x100</td>
      <td style="text-align: right">20.000</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Total</strong></td>
      <td style="text-align: right"><strong>231.000</strong></td>
    </tr>
  </tbody>
</table>

<p>Saya mempelajari bagaimana cara berkirim data menggunakan modul nrf24l01+ untuk menggantikan interaksi wireless dengan bluetooth. Saya pernah punya pengalaman yang kurang mengenakkan dengan bluetooth. Waktu itu saya menggunakan bluefruit feather untuk membuat keyboard wireless bluetooth. Tapi waktu digunakan delaynya kerasa banget. Apalagi biasanya koneksi nya nyendat-nyendat. Kadang masuk, kadang enggak. Disitu saya udah trauma. Apalagi untuk keyboard, latency itu cukup berpengaruh besar dalam kenyamanan penggunaan.</p>

<p>Akhirnya saya memutuskan untuk mempelajari, kira-kira apa yang bisa dibuat untuk menggantikan bluetooth sebagai media koneksi wireless ini. Dan dari situ lah saya menemukan nrf24l01. Modul ini menggunakan modul radio 2.4Ghz, sehingga lebih reliable untuk dijadikan media wireless. Meskipun tidak seperti bluetooth yang langsung bisa konek ke receiver bluetooth apapun, koneksi radio ini harus ada transmitter dan receiver. Nah oleh karena itu, saya memutuskan untuk memulai mempelajari nya lebih dalam. Kebetulan saya baru saja memiliki kesempatan untuk mencoba merealisasikan apa yang selama ini saya idam-idamkan.</p>

<p>Dimulai dari, bagaimana cara menghubungkan modul nrf24l01 ke microcontroller yang saya punya?</p>

<p>Saya membaca referensi dari sini <a href="https://www.researchgate.net/publication/338345202_An_Experiment_With_NRF24L01_and_Arduino_Pro_Micro_Data_Transmission_for_IoT">An Experiment With NRF24L01 and Arduino Pro Micro Data Transmission for IoT</a></p>

<p>Disitu ditunjukkan koneksi dari modul nrf24l01 ke arduino pro micro harus seperti apa.</p>

<p>Langsung saja pada kodingan, berikut ini adalah untuk transmitter. Disini saya menggunakan library <a href="https://github.com/maniacbug/RF24">RF24 fork milik maniacbug</a> karena disana terdapat support untuk modul nrf24l01+.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">"RF24.h"</span><span class="cp">
</span>
<span class="n">RF24</span> <span class="nf">radio</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// disini saya tidak menggunakan CE sama sekali</span>

<span class="k">const</span> <span class="kt">uint64_t</span> <span class="n">channel</span> <span class="o">=</span> <span class="mh">0xF0F0F0F0E1LL</span><span class="p">;</span> <span class="c1">// berdasarkan kajian diatas</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span> <span class="c1">// untuk pairing dengan channel yg telah ditentukan</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">byte</span> <span class="n">msg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">msg</span><span class="p">));</span> <span class="c1">// kirim data</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Sedangkan untuk receiver nya</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">"RF24.h"</span><span class="cp">
</span>
<span class="n">RF24</span> <span class="nf">radio</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// disini saya juga tidak menggunakan CE sama sekali</span>

<span class="k">const</span> <span class="kt">uint64_t</span> <span class="n">channel</span> <span class="o">=</span> <span class="mh">0xF0F0F0F0E1LL</span><span class="p">;</span> <span class="c1">// samakan alamat channel nya</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span> <span class="c1">// di baud 9600</span>

    <span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span> <span class="c1">// membuka pipe untuk membaca data yg terkirim</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span> <span class="c1">// mulai 'mendengarkan' data dari transmitter</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">printDetails</span><span class="p">();</span> <span class="c1">// saya juga ga ngerti ini ngapain?</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">avaliable</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">byte</span> <span class="n">msg</span><span class="p">;</span>
        <span class="n">bool</span> <span class="n">done</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">done</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">done</span> <span class="o">=</span> <span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">msg</span><span class="p">));</span> <span class="c1">// mulai 'membaca' data yg terkirim</span>
            <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span> <span class="c1">// cetak data nya</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Setelah saya upload kodingan tersebut ke masing-masing pro micro nya, saya sudah mulai bisa mengujicoba perihal koneksi dan data yang saling kirim dan terima. Ketika data sudah berhasil terkirim dan diterima, maka sampai sejauh ini modul nrf24l01+ sudah bekerja sesuai fungsinya.</p>

<p>Tinggal ambil keputusan, mau dibuat apakah modul ini?</p>

<p>Sebenarnya saya sudah memutuskan mau dibuat apa percobaan ini. Yaitu dibuat untuk membangun mechanical keyboard custom dengan fitur wireless yang menggunakan transreceiver 2.4Ghz. Dan saya juga sudah sedikit riset tentang matrix keyboard.</p>

<p><img src="/assets/img/arduino-01.jpg" alt="arduino" width="100%" class="center-image" /></p>

<p>Dan hal ini mungkin akan jadi bahasan selanjutnya terkait judul dari post ini.</p>

<p>Baiklah sekian dulu field report riset arduino saya, untuk part berikutnya saya akan bahas tentang penggunaan matrix dalam rangkaian.</p>

<p><br />
<br /></p>

<p>Wassalamuâ€™alaikum Warrahmatullah Wabarakatuh.</p>
:ET